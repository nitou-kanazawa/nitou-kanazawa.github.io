---
title: Tweenライブラリを自作する
categories: [ Unity ]
tags:
  - Unity
  - Tween
---



---
## 1. バッチ処理

`MonoBehaviour`のUpdateはそれなりにコストがあるため，Teenインスタンスの更新は管理クラスを設けてバッチ処理化する．処理のキャンセルを行いたいので，Tweenインスタンスには`Kill()`，`Cancel()`メソッドを用意する．

```mermaid
classDiagram
    class Tween {
      - TweenParams parms

      - float elapsed
      - Action~float~ onUpdate
      - Action onComplete
      - TweenState state

      + Update(float deltaTime)
      + Kill()
      + Cancel()
      + IsPlaying : bool
    }

    class TweenParams {
      - T from
      - T to
      - float duration
      - Ease easing
    }

    class TweenDispatcher {
        - List~Tween~ tweens
        + Update()
        + AddTween(Tween tween)
    }

    direction LR
    
    TweenDispatcher "1" o-- "0..n" Tween
    Tween "1" *-- "1" TweenParams
```


```puml
enum TweenState {
  Idle
  Playing
  Completed
  Canceled
}
```

またユーザに内部処理を意識させないために，外部インターフェースとなるSta




--- 
## 2. オブジェクトプール



---


[主要なTweenライブラリのパフォーマンス比較](https://github.com/AnnulusGames/TweenPerformance)

<!-- Link -->
[リポジトリ]: https://github.com/nitou-kanazawa/NTween
