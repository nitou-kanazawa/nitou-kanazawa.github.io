---
title: HTTP Cookie
category: Web
tags:
  - HTTP
---

`HTTP Cookie`（クッキー）は、Webサーバとクライアント間でユーザーの状態などを維持・管理するための仕組みである．

<!-- more -->


## クッキーの仕組み


## クッキーの詳細使用

#### Expires / Max-Age属性
`Expires`と`Max-Age`はどちらもクッキーの有効期限を示す属性．違いは日時指定か時間指定か．

```
// 日付で指定
Expires=Sat, 16 Mar 2024 07:09:12 GMT;
```

```
// 時間で指定
Max-Age=3600;
```

`Expires`と`Max-Age`の両方が設定されていると，`Max-Age`の方が優先される．
また，どちらも指定されていないクッキはーは`セッションクッキー`と呼ばれ，ブラウザが終了するまで有効となる．
（※近年のブラウザではタブ復元で`セッションクッキー`も復元されるため，必ずしもブラウザ終了で消去されるわけではない）

#### Domain属性


```
Domain=example.jp;
```

`Domain`が省略された場合は，リクエストの送信先がクッキーの発行元ドメインと完全一致したときだけ，クッキーが送信される．よって，必要以上のドメインに対してクッキーを送信しないためには，`Domain`属性を指定しないのが確実である．

#### Path属性


#### Secure属性
暗号化されたHTTPS通信のときだけ，クッキーを送信するように指定する．`Secure`属性に値はないため以下のように属性名のみ指定する．

```
Secure;
```

現在は内容に関わらずWebサイト全体をHTTPSで保護するのが推奨されているため，特別な理由がないが義理は`Secure`属性を付与したクッキーを送信する方が良い．

#### HttpOnly属性
ブラウザが保護しているクッキーは，ブラウザ上で動作するJavaScriptから読み書きできる．一方，`HttpOnly`属性が付与されたクッキーは，JavaScriptからのアクセスが禁止される．

```
HttpOnly;
```

## 参考資料
- [MDN: HTTP Cookie の使用](https://developer.mozilla.org/ja/docs/Web/HTTP/Cookies)
- []()
- []()
- []()
- []()